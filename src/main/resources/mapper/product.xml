<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wadexi.springboot.web.mapper.ProductDao">
    <insert id="insert">
        insert  into t_product(product_name ,stock,price,version,note)
            value (#{productName},#{stock},#{price},0,#{note})
    </insert>

    <insert id="insertDatas" parameterType="arraylist" >
        insert  into t_product(product_name ,stock,price,version,note)
        values
        <foreach collection="productPoList" index="index" item="item" separator=",">
            (
            #{item.productName},
            #{item.stock},
            #{item.price},
            0,
            #{item.note}
            )
        </foreach>
    </insert>



    <select id="getProduct" resultType="com.wadexi.springboot.web.pojo.ProductPo">
        select id, product_name as productName,stock,price,version,note
        from t_product
        where id = #{id}
    </select>

    <update id="decreaseProduct">
        update t_product
        set stock = stock - #{quantity},
            version = version + 1
        where id = #{id} and version = #{version}
    </update>



</mapper>